## AI-Intel 日报功能需求说明

### 1. 系统背景

AI-Intel 目前已经具备以下能力：
- **多源数据采集**：包括 GitHub Trending（`github_trending`）、研究类信息源（如 `research_feeds`，支持论文 / RSS 等）、视频信号（如 B 站，通过 `VideosCollector`）。
- **数据统一存储**：采集结果写入 `data/*.json`（如 `collected_updates.json`、`videos.json`、`bloggers.json` 等），并通过处理器（processors）进行去重、打分、过滤。
- **日报生成**：通过 `generators: [daily_report]` 和 `generator/prompt_builder.py`，使用大模型根据处理后的信号生成一份 Markdown 日报，当前内容偏向 GitHub Trending，整体更像「信息列表」，尚未充分体现对科研 / 产品工作的实际帮助。

本次迭代希望在**不改变现有采集与存储总体框架**的前提下，升级「日报」功能，使其从「信息汇总」进化为「面向科研与产品开发者的决策支持报告」。

> 说明：本轮需求**暂不纳入 Twitter / X 等社交媒体信号的采集与处理**，后续可作为单独迭代接入。

### 2. 本次目标

本次迭代引入的「新版日报」需要满足：
- **可读性强**：结构清晰、段落明确，阅读体验接近一篇经过编辑的技术 newsletter，而不是简单列表。
- **能总结热点 & 分析趋势**：基于最近一段时间内的多源信号，识别出高价值的主题与方向，而不是零散条目。
- **对科研与产品开发有直接帮助**：
  - 科研侧：指出值得跟进的论文、benchmark、方法及其可能影响。
  - 工程 / 产品侧：指出可以直接试用的工具、框架、项目，并给出落地建议。
- **强调 GitHub 是“实践通道”而非唯一信息源**：
  - GitHub Trending 主要用于找「可直接上手的代码 / 工具」。
  - 论文 / 博客 / 视频等信息源用于提供「思路 / 背景 / 案例」。

### 3. 角色与使用场景

- **主要用户角色**
  - **科研人员 / 研究工程师**：关注前沿论文、方法、评测 benchmark 以及相关开源实现。
  - **工程师 / 平台开发者**：关注可用的库、框架、工具链，以及能提升生产力的项目。
  - **产品 / 技术负责人**：希望快速把握方向热点、行业趋势，并找到可落地的产品机会或功能灵感。

- **典型使用场景**
  1. 每天早上或晚上，用户打开系统（或阅读生成的 Markdown / 网页版日报），在 10–20 分钟内：
     - 了解今日 / 近期最重要的 3–5 个主题。
     - 获取若干条可直接实践或深入阅读的推荐（含链接和简评）。
  2. 用户根据日报末尾的「今日可实践清单」，选择 1–3 个行动项（如阅读一篇论文、尝试一个项目、记录一个产品想法）。

### 4. 输入 / 输出定义

#### 4.1 日报生成的输入（逻辑结构）

日报生成器（`daily_report`）的输入抽象为：
- **信号列表 `signals: List[Signal]`**（来自 processors 处理后的统一结构）：
  - `id`: 唯一标识。
  - `type`: `paper | code | video | blog | news | other` 等。
  - `source`: `github | arxiv | rss | bilibili | other` 等。
  - `title`: 简短标题。
  - `summary`: 简要摘要或说明（可由采集器或 processor 预处理生成）。
  - `raw_text`: 原文中较长的一段描述 / 摘要（可选，用于模型理解）。
  - `url`: 原文链接。
  - `published_at`: 发布时间（ISO8601 或统一格式字符串）。
  - `topics: List[str]`: 主题 / 标签，例如 `["agent", "evaluation", "multimodal"]`。
  - `score: float`: 综合得分（相关度 / 热度 / 时效性等）。
  - `metrics: Dict[str, Any]`: 源数据指标，如 `stars_delta`、`views`、`retweets` 等（视数据源而定）。

- **趋势统计 `trend_stats`**（可由单独的 trend processor 提供）：
  - 各主要 topic 在近 7 / 30 天内的出现频次变化。
  - star 增长快的项目 / 主题。

- **系统配置与上下文 `context`**：
  - 例如：当前日期、时区、用户偏好（偏科研 / 偏工程）、关键词白名单 / 黑名单等。

> 当前实现中，底层仍然可以使用 `collected_updates.json`、`trending_history.json`、`videos.json` 等 JSON 文件，只要在进入生成阶段前，将它们映射为上述统一结构即可。

#### 4.2 日报生成的输出

输出为一份 **Markdown 日报文本**（最终会写入 `data/reports.json` 或直接渲染到前端），需要包含：
- 固定标题（例如 `# AI-Intel 日报：YYYY-MM-DD`，前端可按需调整为二级标题）。
- 规范的分级小节结构（见下一节）。
- 每个条目都包含**简洁说明 + 明确用途/启示 + 链接**三部分信息。

### 5. 日报内容结构（用户视角）

日报建议采用以下结构输出（可以视情况微调标题文案，但结构应尽量稳定，以利于阅读和前端渲染）：

1. **今日总览（3–5 个主题）**
   - 目标：让用户在 1–2 分钟内理解「今天（或近期）最值得关注的方向」。
   - 每个主题包含：
     - **主题名称**：例如「轻量级本地 Agent 框架」「多模态 RAG 评测」。
     - **简短说明**：2–3 句话，概述发生了什么、为什么重要。
     - **代表信号**：列出 2–3 条代表性的项目 / 论文 / 文章 / 视频（带简要注释和链接）。

2. **关键进展清单**
   - 按类型细分为两个小节：
     - **科研向**（论文 / 方法 / benchmark）：
       - 每条包含：标题、一句话总结、创新点 / 贡献点、可能影响的方向、链接。
     - **工程 & 产品向**（库 / 工具 / 平台 / 产品更新）：
       - 每条包含：标题、一句话总结、解决什么实际问题、适用场景、落地建议（如「可尝试替代你当前使用的 XXX」）、链接。
   - 数量控制：每类 3–7 条为宜，宁少勿滥。

3. **趋势与判断**
   - 基于 `trend_stats` 或历史数据，给出：
     - 最近 7 / 30 天明显升温的主题（例：某类模型 / 某类工具链 / 某类评测）。
     - 显著降温或热度趋稳的主题。
   - 对每个趋势给出**面向科研和产品的解读**：
     - 对科研：例如「值得考虑把该方向纳入中长期研究规划」。
     - 对产品：例如「可以关注竞品是否已经开始尝试，将来有被用户期待的风险」。

4. **今日可实践清单**
   - 将前文中高价值的若干信号转化为「行动项」，帮助用户落地执行。
   - 按类型组织：
     - **[科研]**：例如「阅读论文 A，思考是否可以替换你当前任务中的模块 B」。
     - **[工程]**：例如「试用 GitHub 仓库 C，评估是否适合作为内部工具」。
     - **[产品]**：例如「参考产品 D 的某个功能设计，看是否可以迁移到你的场景」。
   - 每个行动项应短小、明确，可在 0.5–2 小时内完成或至少开始。

5. **视频精选区**
   - 使用 `videos.json` 中经过过滤和打分后的视频信号（当前主要来自 B 站）。
   - 每条需要包含：
     - 标题（可适度重写以提高清晰度）。
     - 「看这条视频你会收获什么」的一句话说明。
     - 链接。
   - 数量建议 3–5 条。

### 6. 数据源与处理流程（概述）

本次需求假设并延续当前的总体架构：

1. **采集层（Collectors）**
   - `github_trending`：采集 GitHub Trending / 热门项目。
   - `research_feeds`：采集论文 / 研究类 RSS / 博客等（具体以现有实现为准，可在后续迭代完善）。
   - `VideosCollector`（B 站为主）：采集视频信号，并提取其中的 GitHub 链接与作者信息，更新 `bloggers.json` 等。

2. **处理层（Processors）**
   - `deduplicate`：对同源 / 同链接的信号去重。
   - `scoring`：根据相关度（关键词）、热度（stars / 访问量等）、时效性、是否多源共识等维度计算综合得分。
   - `filtering`：控制每日进入日报的信号数量和多样性（如每个 topic / 类型的上限，避免被单一主题“刷屏”）。
   - （可选扩展）`trend_analyzer`：基于历史数据（如 `trending_history.json`）计算趋势指标，提供 `trend_stats`。

3. **生成层（Generators）**
   - `daily_report` 使用上面整理好的 `signals` + `trend_stats` 以及系统上下文，通过 `prompt_builder` 构造 prompt，调用大模型生成结构化 Markdown 日报。
   - 生成结果写入 `data/reports.json` 或其它持久化介质，并供前端展示。

### 7. 非目标（本次迭代不做的事）

- **不改动**现有采集器的总体框架和配置系统（如 `config.yaml` 的大结构），只在必要处按需求补充字段。
- **不实现**新前端大改版：现阶段只保证日报文本结构清晰，便于在现有 `frontend` 中展示。
- **不接入 Twitter / X 等社交媒体采集**：本轮需求不涉及社交媒体数据源，相关 collector 与配置可以保留但不视为本次交付的一部分。
- **不实现多用户 / 权限系统**：默认单用户（你自己）使用。

### 8. 异常与边界情况

1. **当天可用信号很少**
   - 若处理层筛选后可用 `signals` 数量不足（例如 < 5 条）：
     - 日报仍然生成，但总览和各小节中条数减少，并在文首简要标注「今日高质量信号较少」。
     - 为避免“硬拼”，不强行填满每个小节。

2. **某类数据源暂时不可用**
   - 如 GitHub / 论文 / 视频采集失败：
     - 日报中该类小节可省略，或增加一个简短提示说明「某些数据源暂时不可用」。
     - 其他数据源仍然正常参与日报生成。

3. **历史数据不足以支撑趋势分析**
   - 若历史天数不足（例如首次运行或仅有少量天数数据）：
     - 「趋势与判断」部分可以弱化为「当前观察」，不做强烈上升 / 下降判断。

4. **数据质量噪音较多**
   - 通过 `filtering` processor 的关键词 / 黑名单 / 评分阈值进行控制。
   - 如果噪音依旧较多，再在后续迭代中引入基于模型的自动分类 / 聚类，但不属于本次需求范围。

### 9. 验收标准

1. **结构与内容**
   - 生成的日报 Markdown 至少包含本需求文档定义的 5 个主小节（如总览、关键进展、趋势、实践清单、视频精选），即便少数小节内容为空或简化。
   - 每条推荐都包含：标题 + 简要说明 + 明确用途 / 启示 + 链接。

2. **多源信息融合**
   - 日报中出现的条目不再仅限于 GitHub Trending，而是能够同时反映：
     - 研究类进展（来自论文 / 研究 feeds）。
     - 工程工具 / 框架（来自 GitHub 等）。
     - 视频内容（来自 B 站等）。

3. **对科研与产品的帮助**
   - 以「阅读体验」为准：日常使用中，用户能通过日报：
     - 快速了解当前 3–5 个主要技术 / 产品方向的动态；
     - 至少获得 3–5 个**明确可执行**的行动项（阅读 / 试用 / 记录想法）。

4. **稳定运行**
   - 在正常网络条件下，完整跑完一次数据采集 → 处理 → 日报生成流程不报错，并能生成一份结构合理的 Markdown 日报。
   - 在部分数据源不可用的情况下，系统仍能产出降级版日报，而不是直接失败。

